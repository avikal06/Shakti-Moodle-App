{"version":3,"sources":["./src/core/features/mainmenu/pages/home/home.html","./src/core/features/mainmenu/mainmenu-home-lazy.module.ts","./src/core/features/mainmenu/pages/home/home.ts"],"names":[],"mappings":"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","file":"mainmenu-home-lazy-module.js","sourcesContent":["export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title>\\r\\n            <h1>\\r\\n                <core-format-text [text]=\\\"siteName\\\" contextLevel=\\\"system\\\" [contextInstanceId]=\\\"0\\\" class=\\\"core-header-sitename\\\">\\r\\n                </core-format-text>\\r\\n                <img src=\\\"assets/img/top_logo.png\\\" class=\\\"core-header-logo\\\" [alt]=\\\"siteName\\\">\\r\\n            </h1>\\r\\n        </ion-title>\\r\\n        <ion-buttons slot=\\\"end\\\">\\r\\n            <core-user-menu-button></core-user-menu-button>\\r\\n        </ion-buttons>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<core-loading [hideUntil]=\\\"loaded\\\">\\r\\n    <core-empty-box *ngIf=\\\"tabs.length == 0\\\" icon=\\\"fas-house\\\" [message]=\\\"'core.courses.nocourses' | translate\\\"></core-empty-box>\\r\\n</core-loading>\\r\\n<core-tabs-outlet *ngIf=\\\"tabs.length > 0\\\" [hideUntil]=\\\"loaded\\\" [tabs]=\\\"tabs\\\" (ionChange)=\\\"tabSelected()\\\">\\r\\n</core-tabs-outlet>\\r\\n\";","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injector, NgModule } from '@angular/core';\nimport { RouterModule, ROUTES, Routes } from '@angular/router';\n\nimport { CoreSharedModule } from '@/core/shared.module';\n\nimport { buildTabMainRoutes } from '@features/mainmenu/mainmenu-tab-routing.module';\nimport { CoreMainMenuHomeHandlerService } from '@features/mainmenu/services/handlers/mainmenu';\nimport { CoreMainMenuComponentsModule } from '@features/mainmenu/components/components.module';\nimport { resolveHomeRoutes } from '@features/mainmenu/mainmenu-home-routing.module';\nimport { CoreMainMenuHomePage } from '@features/mainmenu/pages/home/home';\n\n/**\n * Build module routes.\n *\n * @param injector Injector.\n * @returns Routes.\n */\nfunction buildRoutes(injector: Injector): Routes {\n    const routes = resolveHomeRoutes(injector);\n\n    return [\n        ...buildTabMainRoutes(injector, {\n            path: '',\n            data: {\n                mainMenuTabRoot: CoreMainMenuHomeHandlerService.PAGE_NAME,\n            },\n            component: CoreMainMenuHomePage,\n            children: routes.children,\n        }),\n        ...routes.siblings,\n    ];\n}\n\n@NgModule({\n    imports: [\n        CoreSharedModule,\n        CoreMainMenuComponentsModule,\n    ],\n    providers: [\n        { provide: ROUTES, multi: true, useFactory: buildRoutes, deps: [Injector] },\n    ],\n    declarations: [\n        CoreMainMenuHomePage,\n    ],\n    exports: [\n        RouterModule,\n    ],\n})\nexport class CoreMainMenuHomeLazyModule {}\n","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { CoreSites } from '@services/sites';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { CoreTabsOutletComponent, CoreTabsOutletTab } from '@components/tabs-outlet/tabs-outlet';\nimport { CoreMainMenuHomeDelegate, CoreMainMenuHomeHandlerToDisplay } from '../../services/home-delegate';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreMainMenuHomeHandlerService } from '@features/mainmenu/services/handlers/mainmenu';\nimport { CoreMainMenuDeepLinkManager } from '@features/mainmenu/classes/deep-link-manager';\n\n/**\n * Page that displays the Home.\n */\n@Component({\n    selector: 'page-core-mainmenu-home',\n    templateUrl: 'home.html',\n})\nexport class CoreMainMenuHomePage implements OnInit {\n\n    @ViewChild(CoreTabsOutletComponent) tabsComponent?: CoreTabsOutletComponent;\n\n    siteName = '';\n    tabs: CoreTabsOutletTab[] = [];\n    loaded = false;\n\n    protected subscription?: Subscription;\n    protected updateSiteObserver?: CoreEventObserver;\n    protected deepLinkManager?: CoreMainMenuDeepLinkManager;\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        this.deepLinkManager = new CoreMainMenuDeepLinkManager();\n\n        await this.loadSiteName();\n\n        this.subscription = CoreMainMenuHomeDelegate.getHandlersObservable().subscribe((handlers) => {\n            handlers && this.initHandlers(handlers);\n        });\n\n        // Refresh the enabled flags if site is updated.\n        this.updateSiteObserver = CoreEvents.on(CoreEvents.SITE_UPDATED, async () => {\n            await this.loadSiteName();\n        }, CoreSites.getCurrentSiteId());\n    }\n\n    /**\n     * Init handlers on change (size or handlers).\n     */\n    initHandlers(handlers: CoreMainMenuHomeHandlerToDisplay[]): void {\n        // Re-build the list of tabs.\n        const loaded = CoreMainMenuHomeDelegate.areHandlersLoaded();\n        const handlersMap = CoreUtils.arrayToObject(handlers, 'title');\n        const newTabs = handlers.map((handler): CoreTabsOutletTab => {\n            const tab = this.tabs.find(tab => tab.title == handler.title);\n\n            // If a handler is already in the list, use existing object to prevent re-creating the tab.\n            if (tab) {\n                return tab;\n            }\n\n            return {\n                page: `/main/${CoreMainMenuHomeHandlerService.PAGE_NAME}/${handler.page}`,\n                pageParams: handler.pageParams,\n                title: handler.title,\n                class: handler.class,\n                icon: handler.icon,\n                badge: handler.badge,\n            };\n        });\n\n        // Sort them by priority so new handlers are in the right position.\n        newTabs.sort((a, b) => (handlersMap[b.title].priority || 0) - (handlersMap[a.title].priority || 0));\n\n        this.tabs = newTabs;\n\n        // Try to prevent empty box displayed for an instant when it shouldn't.\n        setTimeout(() => {\n            this.loaded = loaded;\n        }, 50);\n    }\n\n    /**\n     * Load the site name.\n     */\n    protected async loadSiteName(): Promise<void> {\n        const site = CoreSites.getRequiredCurrentSite();\n        this.siteName = await site.getSiteName() || '';\n    }\n\n    /**\n     * Tab was selected.\n     */\n    tabSelected(): void {\n        this.deepLinkManager?.treatLink();\n    }\n\n    /**\n     * User entered the page.\n     */\n    ionViewDidEnter(): void {\n        this.tabsComponent?.ionViewDidEnter();\n    }\n\n    /**\n     * User left the page.\n     */\n    ionViewDidLeave(): void {\n        this.tabsComponent?.ionViewDidLeave();\n    }\n\n}\n"],"sourceRoot":"webpack:///"}